{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
    <h2>Order #{{ order.id }}</h2>
    <hr>

    <p><strong>Customer:</strong> {{ order.customer_id }}</p>
    <p><strong>Total Amount:</strong> â‚µ{{ order.total_amount }}</p>
    <p><strong>Status:</strong> 
        <span class="badge bg-info">{{ order.status }}</span>
    </p>
    <p><strong>Created at:</strong> {{ order.created_at|date:"Y-m-d" }}</p>

    <hr>
    <h4>Deliveries</h4>

    {% for delivery in order.deliveries.all %}
    <div class="card mb-3">
        <div class="card-body">
            <h5>{{ delivery.package_name }}</h5>
            <p><strong>Receiver:</strong> {{ delivery.receiver_name }}</p>
            <p><strong>Phone:</strong> {{ delivery.receiver_phone }}</p>
            <p><strong>Address:</strong> {{ delivery.delivery_address }}</p>
            {% if delivery.delivery_notes %}
            <p><strong>Notes:</strong> {{ delivery.delivery_notes }}</p>
            {% endif %}

            <p>
                <strong>Status:</strong>
                <span class="badge bg-secondary">{{ delivery.status }}</span>
            </p>

            <p>
                <strong>Rider:</strong>
                {% if delivery.rider %}
                    {{ delivery.rider.user.email }}
                {% else %}
                    <span class="text-danger">Not assigned</span>
                {% endif %}
            </p>

            {% if delivery.is_fragile %}
            <p>
                <span class="badge bg-warning text-dark">Fragile</span>
            </p>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p>No deliveries found for this order.</p>
    {% endfor %}
</div>

{% endblock %}
